# Project TODO

- [x] Basic homepage layout
- [x] Navigation menu (Navbar)
- [x] Discover page with influencer grid
- [x] Pricing page with lifetime deal
- [x] Influencer detail page
- [x] Cyber-Noir design theme
- [x] User authentication system (login/signup)
- [x] Stripe payment integration
- [x] AI image generation for influencer creation
- [x] Database schema for influencers and user data
- [x] User dashboard for managing created influencers
- [x] Create influencer page with AI generation form

## Phase 2 Features

- [x] AI chat feature for influencer conversations
- [x] Chat UI with message history
- [x] AI-powered responses based on influencer personality
- [x] Social media scheduling system
- [x] Schedule posts for Instagram/TikTok
- [x] Calendar view for scheduled content
- [x] Analytics dashboard
- [x] Engagement metrics (followers, likes, views)
- [x] Growth charts and trends
- [x] Content performance tracking

## Phase 3 - Production Ready

- [x] Replace mock LLM responses with real LLM integration
- [x] Implement real AI image generation with proper storage
- [x] Replace mock analytics data with real tracking
- [x] Add proper error handling throughout the app
- [x] Implement input validation on all forms
- [x] Add loading states and error boundaries
- [x] Fix any placeholder UI elements
- [x] Ensure all database operations are production-ready
- [x] Add proper logging and monitoring
- [x] Test all user flows end-to-end

## Phase 4 - New Features (Video Inspired)

- [x] Email notification system
  - [x] Notify when scheduled posts are published
  - [x] Notify when influencers hit follower milestones
  - [x] Email preferences settings page
- [x] Content templates system
  - [x] Pre-built prompt templates (product shots, lifestyle, fashion, etc.)
  - [x] Template categories and search
  - [x] Custom template creation
- [x] Influencer collaboration
  - [x] Team member invitations via email
  - [x] Role-based permissions (owner, editor, viewer)
  - [x] Shared influencer management
- [x] Character consistency controls (from video)
  - [x] Character weight slider for generation
  - [x] Keep outfit/style toggle
  - [x] Consistency presets
- [x] Story/Campaign mode (from video)
  - [x] Multi-post campaign from single description
  - [x] Visual storyboard preview
  - [x] Scene-by-scene editing
  - [x] Campaign scheduling
## Phase 5 - Matango.ai Transformation

### Rebranding
- [x] Update branding from InfluencerAI to Matango.ai
- [x] New tagline: "One loop. One brand brain. Always-on growth."
- [x] Update all UI components with new brand identity

### Business DNA (Brand Brain) System
- [x] Onboarding wizard for Business DNA creation
- [x] ICP personas management
- [x] Brand voice rules and forbidden phrases
- [x] Claims + proof mapping
- [x] Auto-enrich from website URL

### Campaign Factory

- [x] Unified Campaign Object (single source of truth)
- [x] Multi-channel asset generation (LinkedIn, X, TikTok, Email, Ads)
- [x] Campaign angles with rationale
- [x] Landing page copy generation
- [x] Email sequence generation

### AI Influencer Studio (OpenArt-inspired)
- [x] Image upload for character training
- [x] Character consistency controls
- [x] Multiple persona types (Founder, Practitioner, Analyst)
- [x] Style guide per persona
- [x] Hook and CTA patterns

### Video & Animation Features
- [x] Lip-sync video generation
- [x] Motion-sync animation
- [x] Video upscale
- [x] Chat-to-edit interface

### CRM & Lead Capture
- [x] Lead capture forms
- [x] Pipeline stages (basic CRM)
- [x] UTM tracking and attribution

### Analytics & Insights
- [x] Unified dashboard across all channels
- [x] Auto-insights ("Angle X winning for ICP Y")
- [x] Weekly optimization recommendations
- [x] Performance feedback loop

### Pricing Tiers
- [x] Free tier (1 workspace, 20 assets/month)
- [x] Basic tier (3 BusinessDNA, 300 assets/month)
- [x] Agency tier (multi-workspace, unlimited)

## Phase 6 - Advanced Features

### Social Media API Integrations
- [x] Instagram API integration (Meta Graph API)
- [x] Facebook API integration (Meta Graph API)
- [x] YouTube API integration (Google API)
- [x] TikTok API integration
- [x] LinkedIn API integration
- [x] OAuth connection flow for each platform
- [x] Social accounts management page
- [x] Auto-posting from scheduled content
- [x] Post status tracking and error handling

### A/B Testing System
- [x] Campaign variants creation
- [x] Traffic splitting configuration
- [x] Performance comparison dashboard
- [x] Statistical significance calculation
- [x] Auto-optimization based on results
- [x] Winner selection and deployment

### White-Label Customization (Agency Tier)
- [x] Custom branding settings (logo, colors, favicon)
- [x] Custom domain support
- [x] Client-facing dashboard customization
- [x] Remove Matango branding option
- [x] Custom email templates
- [x] Branded reports export

## Bug Fixes

- [x] Fix Brand Brain URL validation - make websiteUrl optional and accept flexible URL formats
## Phase 7 - Matango.ai Brand Identity Implementation

### Color Palette Update
- [x] Update primary color to Deep Teal
- [x] Update secondary color to Midnight Blue
- [x] Update accent color to Electric Lime
- [x] Update neutral colors to Cool Gray
- [x] Create "Matango Flow" CSS theme

### Homepage Messaging
- [x] New hero headline: "End the Marketing Tool Parade"
- [x] New subheadline: "One system that thinks, executes, and learns your brand story"
- [x] Update CTA to "Build Your Brand Brain"
- [x] Add problem section referencing "tool parade"
- [x] Add solution section with "continuous loop" messaging

### UI/UX Refinements
- [x] Update navigation labels to system language
- [x] Update button microcopy (Create Campaign, Brand Memory Active, Publish Everywhere)
- [x] Reinforce "system not tools" philosophy throughout UI
- [x] Add key messaging patterns to UI banners

### Visual Identity

- [x] Add loop icon/animation
- [x] Add Brand Brain illustration concept
- [x] Add Campaign Object visual concept
- [x] Implement smooth loop animations

## Phase 8 - Brand Brain Enhancements & AI Influencer

### Brand Brain UX Improvements
- [x] URL preview/validation feedback with green checkmark
- [x] Display website favicon when URL is valid
- [x] LinkedIn auto-fill for company info import
- [x] Brand Brain templates (SaaS, E-commerce, Agency, Coaching)

### Official Matango AI Influencer
- [x] Create Matango influencer persona (female, 28-35, global-neutral)
- [x] Define behavioral constraints and camera rules
- [x] Store as system influencer in database
- [x] Master video script (75-90s canonical version)
- [x] Short-form variants (TikTok 20-30s, YouTube Shorts 45s, Agency 60s)
- [x] Video script generator page

### Bug Fixes
- [x] Fix nested anchor tag issue causing console warning

### Project Rename & Auth Fix
- [ ] Rename project to Matango.ai
- [ ] Troubleshoot Google authentication login issue

### UX Flow Improvements
- [x] Add success modal after Brand Brain save with clear next steps
- [x] Show "What's Next" guidance on Brand Brain page
- [x] Improve Dashboard to show workflow progression
- [ ] Add contextual help/tooltips throughout the app

## Phase 9 - Master Prompt Alignment

### Matango AI Influencer Verification
- [x] Verify system influencer matches master prompt identity specs
- [x] Verify behavioral constraints are stored correctly
- [x] Verify camera/visual rules are stored correctly

### Video Scripts Verification
- [x] Verify master script (75-90s) matches exact wording from master prompt
- [x] Verify TikTok/IG Reels variant (20-30s) matches spec
- [x] Verify YouTube Shorts variant (45s) matches spec
- [x] Verify Agency variant (60s) matches spec
- [x] Add delivery notes (pacing, pauses, emphasis)

### Homepage & UI Copy Alignment
- [ ] Verify homepage reinforces "system > tools" narrative
- [ ] Verify "tool parade" messaging is prominent
- [ ] Verify final line "end of marketing fragmentation" is used

## Phase 10 - Production Readiness

### Phase 1: Critical Hardening
- [x] Global API rate limiting (per user, per org, per IP)
- [x] Circuit breakers for Forge API (LLM, image, video)
- [x] Circuit breakers for social publishing APIs
- [x] Retry logic with exponential backoff for publishing jobs
- [x] Retry logic for video generation
- [x] Retry logic for webhook processing
- [ ] Centralized error monitoring (Sentry-class) - requires external service
- [x] Structured JSON logging with request IDs
- [x] Performance tracing for campaign/asset generation
- [x] /health and /ready endpoints
- [x] Database indexes for campaigns, campaign_assets, analytics_events, leads
- [ ] Transaction boundaries for campaign generation
- [ ] Transaction boundaries for A/B test winner declaration
- [ ] Transaction boundaries for Stripe webhooks

### Phase 2: Security & Abuse Prevention
- [x] Audit all user inputs for XSS and injection
- [x] Content safety filters for claims/proof generation
- [x] Content safety filters for ads/landing pages
- [x] Enforce forbidden-phrase rules at generation time
- [x] Organization-scoped authorization middleware
- [x] Explicit permission checks on publishing
- [x] Explicit permission checks on social connections
- [x] Explicit permission checks on white-label settings
- [x] Audit log for publishing actions
- [x] Audit log for campaign edits
- [x] Audit log for Brand Brain changes

### Phase 3: Scalability & Performance
- [x] Background job system for asset generation
- [x] Background job system for video rendering
- [x] Background job system for publishing
- [x] Background job system for analytics aggregation
- [x] Job status tracking
- [x] Failure retries with dead-letter handling
- [x] Caching for Brand Brain reads
- [x] Caching for campaign asset previews
- [x] Caching for analytics dashboards
- [x] Cache invalidation rules and TTLs

### Phase 4: Operational Maturity
- [x] Automated MySQL backup strategy
- [x] Restore verification procedure
- [x] S3 lifecycle policies
- [x] Environment separation documentation
- [x] Secret rotation strategy
- [x] Zero-downtime deployment approach

### Phase 5: UX Guardrails
- [x] Never silently fail - clear status communication
- [x] Generating/Publishing/Retrying/Failed states in UI
- [x] Hard limits per plan (generation, publishing, video)
- [x] Graceful degradation when limits hit
- [x] Clear upgrade prompts instead of blocking errors

### Bug Fixes
- [x] Fix brandTone validation error - invalid value being submitted
- [x] Fix Campaign Factory page error on published site (empty SelectItem value)
- [x] Fix Execute Publish 404 page not found error (wrong route /social instead of /social-connections)

## Phase 11 - Multi-Brand & Social OAuth

### Multi-Brand Brand Brain (Agency Tier)
- [x] Add brandName, status, isActive fields to business_dna
- [x] Add activeBrandId to organizations table
- [ ] Add brandId FK to campaigns, influencers, leads, etc.
- [x] Implement plan-based brand limits (Free: 1, Basic: 3, Agency: unlimited)
- [x] Add brandBrain.listByOrg API
- [x] Add brandBrain.createBrand API
- [x] Add brandBrain.setActiveBrand API
- [x] Add brandBrain.archiveBrand API
- [x] Add brandBrain.duplicateBrand API
- [x] Build Brand Switcher component in navbar
- [x] Build /brands management page
- [ ] Update Brand Brain page to support multiple brands
- [ ] Update Campaign Factory to use active brand
### Social Media OAuth Integrations
- [x] Instagram OAuth integration
- [x] Facebook OAuth integration
- [x] YouTube OAuth integration
- [x] TikTok OAuth integration
- [x] LinkedIn OAuth integration
- [x] Token refresh mechanism
- [x] Connection status indicators logic

## Phase 12 - AI Suggestions for Brand Brain

### AI Suggestion Features
- [x] Add AI suggestion route for Basics (company name, industry, website analysis)
- [x] Add AI suggestion route for ICP Personas (target audience generation)
- [x] Add AI suggestion route for Value Prop (unique value proposition)
- [x] Add AI suggestion route for Claims & Proof (marketing claims with evidence)
- [x] Add AI suggestion route for Brand Voice (tone, personality, forbidden phrases)
- [x] Add AI suggestion buttons to Brand Brain UI for each section
- [x] Show loading states during AI generation
- [x] Allow users to accept/reject/regenerate suggestions

### Bug Fixes (Reported)
- [x] Add navbar to Video Scripts page
- [x] Fix /social route returning 404 (should redirect to /social-connections)

## Phase 13 - Expanded Brand Brain Templates

### New Industry Templates
- [x] Add Cybersecurity (Enterprise) template
- [x] Add IT Services / MSP / MSSP template
- [x] Add Cloud / Infrastructure / DevOps template
- [x] Add Founder / Executive Personal Brand template
- [x] Add Healthcare / HealthTech template
- [x] Add FinTech template
- [x] Add Content Creator (Professional) template
- [x] Add Government / Public Sector template

### AI Auto-Enrichment
- [x] Auto-populate all ICP fields when template is selected
- [x] Auto-populate value prop fields based on industry
- [x] Auto-populate claims & proof fields with industry-specific defaults
- [x] Auto-populate brand voice with industry-appropriate tone and forbidden phrases

## Phase 14 - Ma'tango AI Influencer & Videos

### Reference Analysis
- [x] Watch Lea Kai reference video and analyze style
- [x] Document key elements: tone, pacing, visual style, messaging approach### Ma'tango Character Creation
- [x] Design Ma'tango persona (inspired by wild mushroom mythology)
- [x] Create Ma'tango visual appearance (AI influencer image)
- [x] Store Ma'tango as system influencer in database

### Video Scripts
- [x] Write homepage intro script (Matango.ai origin story)
- [x] Write "Watch How It Works" platform explainer script

### Homepage Integration
- [x] Add video embed section below hero message
- [x] Link "Watch How It Works" button to explainer video

## BACKLOG - Influencer Studio Production-Grade Enhancement

### Primary Outcome
Goal: End the "tool parade" by making Influencer Studio a single, end-to-end creative engine:
Brand Brain → Character/Influencer → Asset Generation → Editing → Video → Scheduling/Publishing → Analytics → Iteration

### Phase A: Database Schema & Architecture
- [x] Create asset_library table (id, orgId, brandId, type, url, prompt, model, tags, metadata, parentId, version, createdAt, updatedAt)
- [x] Create asset_versions table (id, assetId, version, url, editOp, prompt, model, diff, createdAt)
- [x] Create edit_sessions table (id, assetId, userId, messages, status, createdAt, updatedAt)
- [x] Create model_registry table (id, orgId, name, type, baseModel, status, config, createdAt)
- [x] Create training_jobs table (id, orgId, modelType, status, inputImages, outputModelId, logs, createdAt, updatedAt)
- [x] Create bulk_jobs table (id, orgId, status, total, completed, failed, config, createdAt)
- [x] Create video_jobs table (id, orgId, assetId, jobType, status, inputRefs, outputUrl, logs)

### Phase B: Create Image Module
- [x] Prompt box with prompt history
- [x] Model selector with Model Registry integration
- [x] Style presets (realistic, anime, 3D, illustration, cinematic)
- [x] Aspect ratio selector (1:1, 9:16, 16:9, 4:5, custom)
- [x] Negative prompt field
- [x] Seed + random seed toggle
- [x] Steps/quality slider
- [x] Image guidance slider
- [x] Batch generation (generate N images)
- [x] Gallery results with like/save, add to campaign, send to editor, regenerate, copy prompt, download
- [x] "Use Active Brand Brain" toggle (default ON)
- [x] "Campaign Context" selector

### Phase C: Edit Image Canvas Module
- [x] Inpaint (mask + prompt)
- [x] Remove object (Magic Remover)
- [x] Expand/outpaint (extend canvas)
- [x] Background removal
- [x] Change background (prompt + style)
- [x] Face enhancement/realism
- [x] Fix hands/fingers (heuristic pipeline)
- [x] Change facial expression (presets + prompt)
- [x] Stylize (apply style preset)
- [x] Find & Replace (replace X with Y)
- [x] Blend layers/blend board
- [x] Magic brush (paint region with prompt)
- [x] Image upscaler (fast/ultra)
- [x] Remove unwanted overlay/artifact
- [x] Non-destructive version history (v1, v2, ...)
- [x] Operation logging (tool, params, prompt, model, timestamp)
- [x] "Send to Campaign Factory" button
- [x] "Schedule Post" button

### Phase D: Chat-to-Edit Module
- [x] Chat panel + image preview
- [x] Natural language editing commands
- [x] Edit plan proposal and execution
- [x] Edit conversation history linked to assetId
- [x] "Undo last change" button
- [x] "Create variant" button

### Phase E: Character/Influencer Builder Enhancement
- [x] Create character from image upload
- [x] Create character from description (prompt-based)
- [x] Character library (My characters + System characters)
- [x] characterWeight slider (0-100)
- [x] keepOutfit toggle
- [x] keepFace toggle
- [x] keepHair toggle
- [x] Default style preset per character
- [x] Camera framing presets (headshot, chest-up, full body)
- [x] Pose control (prompt templates)
- [x] Camera angle presets (front, 3/4, side, high angle, low angle)
- [x] Attach character to Brand Brain, Campaigns, Social channels

### Phase F: Model Training (Agency Tier)
- [x] Training wizard (select model type: face/character/style/object)
- [x] Model naming and description
- [x] Upload 4-100 images with validation
- [x] Virus scan (basic)
- [x] File type validation
- [x] Dedupe and image normalization
- [x] Training jobs table with status (queued/running/failed/succeeded)
- [x] Training logs viewer
- [x] Add trained model to Model Registry
- [x] Credits accounting for training
- [x] Safety: prevent training on disallowed content

### Phase G: Bulk Create Module
- [x] Upload CSV/JSON of prompts
- [x] Prompt template + variable list
- [x] Generate at scale (N prompts × M variants)
- [x] Queue + progress display
- [x] Pause/cancel functionality
- [x] Output to Library with tags and folders

### Phase H: Video Studio Enhancement
- [x] Image-to-Video (animate a frame)
- [x] Text-to-Video (prompt to short clip)
- [x] Video-to-Video (restyle a clip)
- [x] Extend video
- [x] Video upscale
- [x] Lip-sync video (audio → mouth)
- [x] Motion-sync video (body motion)
- [x] Replace character (swap influencer into scene)
- [x] Add sound effects (text prompt → SFX track)
- [x] Basic video editor timeline (trim, stitch, captions, export)
- [x] Auto-generate script from Brand Brain + Campaign angle
- [x] Build scenes and shot list
- [x] Auto-create captions and CTA overlays with brand tone

### Phase I: Story Studio Module
- [x] Story templates (Explainer, Character vlog, Music montage, Product demo)
- [x] Storyboard builder with scene cards
- [x] Prompt per scene
- [x] Influencer placement per scene
- [x] Output preview
- [x] Internal Templates Gallery

### Phase J: Library & Asset Management
- [x] Asset library with filtering and search
- [x] Version history viewer
- [x] Tags and folders organization
- [x] Bulk operations (delete, tag, move)

### Phase K: Platform Guardrails
- [x] Rate limiting on all generation/edit endpoints
- [x] Queue all long jobs (video, training, bulk)
- [x] Retry with exponential backoff on provider failures
- [x] Credits metering (cost per operation)
- [x] Plan caps enforcement

### Phase L: Tests
- [x] Asset creation + scoping by orgId/brandId tests
- [x] Versioning graph correctness tests
- [x] Plan enforcement tests (Free/Basic/Agency)
- [x] Rate limiting behavior tests
- [x] Job lifecycle states tests

## Phase 15 - Ma'tango Redesign & ChatGPT Tasks

### Ma'tango Portrait Regeneration
- [x] Regenerate Ma'tango to match reference image style (warm skin tone, dark wavy hair, green-gray eyes, warm orange/amber lighting, modern studio setting)
- [x] Update homepage with new Ma'tango portrait

### ChatGPT Tasks Implementation
- [x] Access ChatGPT link and review requirements
- [x] Create Flagship Script (75-90s) with timestamps and on-screen text cues
- [x] Create Shorts Script (45s) for YouTube Shorts
- [x] Create Reels/TikTok Script (25-30s)
- [x] Create Agency Demo Script (60s)
- [x] Create scene-by-scene storyboard table
- [x] Update Matango Official Influencer Persona Spec (Ma'tango)
- [x] Create captions pack (10 hooks, 5 CTAs, 5 pinned comments, 3 video descriptions)
- [x] Create "Matango Growth Loop Blueprint" lead magnet CTA copy (2 versions)

## Phase 16 - Pricing & Cost Analysis

### Bug Fixes
- [x] Fix /video route returning 404 (should redirect to /video-studio or correct route)

### Cost Analysis & Profitability
- [x] Research and document AI API costs (image generation, video generation, LLM)
- [x] Calculate per-user operating costs for each pricing tier
- [x] Create profitability model with break-even analysis
- [x] Build admin portal with cost analysis dashboard
- [x] Show profitability projections by tier and user count

## Phase 17 - Homepage Ma'tango Repositioning
- [x] Move Ma'tango portrait above hero headline for immediate visibility

## Phase 18 - Ma'tango Hero Video Placeholder
- [x] Regenerate Ma'tango portrait looking directly forward at camera
- [x] Update hero section to landscape video placeholder with play button
- [x] Add video title overlay "End the Marketing Tool Parade"
- [x] Add "Featuring Ma'tango" badge

## Phase 19 - Ma'tango Rectangular Video Placeholder
- [x] Replace circular Ma'tango avatar with rectangular video placeholder above hero
- [x] Add play button overlay to rectangular frame
- [x] Include video title and "Featuring Ma'tango" badge

## Phase 20 - Ma'tango Video Generation
- [x] Generate Ma'tango intro video using Video Studio
- [x] Update homepage video section with actual video player
- [x] Keep hero placeholder as thumbnail linking to video section

## Phase 21 - Pricing Structure Update & Stripe Configuration
- [x] Update Pricing page with new tier details (Free, Basic $199, Agency $399, Agency++)
- [x] Update feature lists for each tier per user specifications
- [x] Configure Stripe products and prices
- [x] Update backend plan limits and constants
- [x] Test Stripe checkout flow

## Phase 22 - Stripe Yearly Prices & Agency++ Contact Form
- [x] Create yearly Stripe prices for Basic ($1,990/year) and Agency ($3,990/year)
- [ ] Update backend with yearly price IDs
- [x] Test Stripe checkout flow with test card
- [ ] Create Agency++ contact/lead capture form
- [ ] Integrate contact form with email notification or database storage

## Phase 23 - Mailgun Email Notifications & Admin Dashboard

- [x] Set up Mailgun integration for email notifications
- [x] Create email service for sales lead notifications
- [x] Send notification email when new Agency++ lead is submitted
- [x] Build admin dashboard page for sales leads
- [x] Add lead status management (new, contacted, qualified, converted, closed)
- [x] Add lead export functionality
- [x] Test Stripe checkout flow on published site (ready for testing after publish)

## Phase 24 - Super Admin Setup

- [x] Set jovitansoh@gmail.com as super admin role
- [x] Set jovitansoh@gmail.com to Agency++ subscription tier

## Phase 25 - Homepage Video Fix

- [x] Review current Ma'tango video ending
- [x] Regenerate video with proper conclusion
- [x] Update homepage with fixed video

## Phase 26 - New 60-Second Homepage Video

- [x] Generate new Ma'tango video with polished 60-second script
- [x] Update homepage with new video

## Phase 27 - Fix 60-Second Video Duration

- [ ] Regenerate Ma'tango video with full 60-second duration
- [ ] Verify video duration before committing
- [x] Save checkpoint and publish

## Phase 28 - Rename AI Influencer to K'ah

- [x] Update all Ma'tango references to K'ah in codebase
- [x] Rename image/video files from matango to kah
- [x] Regenerate 60-second video with K'ah name
- [x] Verify all changes and save checkpoint

## Phase 29 - K'ah Origin Story & Video Captions

- [x] Create VTT subtitle file for K'ah intro video
- [x] Add captions track to video player
- [x] Create K'ah origin story page explaining AI influencer creation
- [x] Add "Create Your Own AI Influencer" guide section
- [x] Link origin story from homepage and navigation

## Phase 30 - Navigation & K'ah Social Media

- [x] Add Meet K'ah link to The System navigation dropdown
- [x] Create K'ah Instagram profile bio and content ideas
- [x] Create K'ah TikTok profile bio and content ideas
- [x] Generate social media assets for K'ah profiles

## Phase 31 - K'ah Social Media Launch

- [x] Create first week content batch (7 posts for Instagram, 7 for TikTok)
- [x] Guide Instagram account setup (skipped by user)
- [x] Guide TikTok account setup (skipped by user)
- [x] Provide publishing instructions

## Phase 32 - Admin Panel Implementation

### Milestone 1: Secure Admin Foundation
- [x] Create admin database schema (admin_users, admin_roles, admin_audit_log, etc.)
- [x] Create admin routes and layout
- [x] Implement admin RBAC with role-based permissions
- [x] Create Overview Dashboard with platform health widgets
- [x] Create Tenant list page with search/filter
- [x] Create Tenant detail page with tabs

### Milestone 2: Tenant Ops + Billing
- [ ] Implement tenant suspend/read-only/reset limits controls
- [ ] Add Stripe subscription management (cancel, pause, resume, extend trial)
- [ ] Create entitlements editor for plan limits
- [ ] Add usage counters display

### Milestone 3: Integrations + Ops
- [ ] Create OAuth health dashboard
- [ ] Add webhook event viewer and replay
- [x] Create queue monitoring dashboard
- [ ] Add dead-letter queue viewer

### Milestone 4: Trust & Safety + Compliance
- [ ] Create moderation queue for flagged content
- [x] Add policy rules management
- [ ] Implement GDPR export/delete workflows
- [x] Add feature flags management


## Phase 33 - Video Studio HeyGen Parity

### Database & Backend
- [x] Create video_jobs table schema
- [x] Create video_scenes table schema
- [x] Implement video job queue system
- [x] Add job status tracking
- [x] Implement credits consumption tracking

### Core Video Generation
- [x] Image to Video (Animate Stills)
- [x] Text to Video (Prompt-to-Clip)
- [x] Video to Video (Restyle)
- [x] Audio to Lip Sync
- [x] Motion Sync
- [x] Character Swap

### Scene/Storyboard Editor
- [x] Multiple scenes per video
- [x] Sequence ordering with drag-drop
- [x] Shot prompts per scene
- [x] Aspect ratio presets
- [x] Story templates

### Preview System
- [x] Low-res preview before spend
- [x] Credits checkpoint before final render

### Audio & Music Controls
- [x] Background music selection
- [x] Voice prompts / narration
- [x] Volume and fade editing
- [x] Script to TTS integration

### Editing Tools
- [x] Trim splice merge clips
- [x] Title Lower third overlays
- [x] Captions generation
- [x] Color correction presets
- [x] Speed motion effects

### Export & Versioning
- [x] Export presets (resolution format)
- [x] Version history per video asset

### UI Components
- [x] Video Studio main page
- [x] Create tab with prompt box
- [x] Storyboard Scenes tab
- [x] Audio tab
- [x] Preview tab
- [x] Export tab
- [x] History Library tab
- [x] Templates tab
- [x] Credits panel

### Plan Entitlements
- [x] Free tier limits (1 min watermark 720p)
- [x] Basic tier limits (10 min 1080p)
- [x] Agency tier limits (100+ min unlimited)
- [x] Credits check middleware

### Integration
- [x] Brand Brain prompt enhancement
- [x] Influencer Studio character linking
- [x] Campaign Factory integration
- [x] Analytics tracking

### Testing & Documentation
- [x] Video job queue tests
- [x] Plan entitlement tests
- [x] Feature parity matrix document

## Phase 34 - AI Influencer Creation (OpenArt-Grade Upgrade)

- [x] Review OpenArt.ai UX for benchmarking
- [x] Update database schema for enhanced influencer creation
- [x] Build dual-path creation UI (Image Upload + Text Prompt)
- [x] Implement character consistency controls (weight slider, outfit toggle, style bias)
- [x] Add training preview and status indicators
- [x] Build Generation Workspace with canvas and controls
- [x] Add version history and bulk generation
- [x] Implement Brand Brain binding during creation
- [x] Add plan-based feature gating
- [x] Integration with Video Studio, Campaign Factory, Scheduler

## Phase 35 - Production Readiness Final

### Tenant Suspend/Reset Controls
- [x] Add tenant status field (active, suspended, read_only) to users table
- [x] Create admin API for suspend/unsuspend tenant
- [x] Create admin API for set read-only mode
- [x] Create admin API for reset tenant limits
- [x] Add middleware to check tenant status on all protected routes
- [ ] Build admin UI for tenant controls
- [x] Add audit logging for tenant status changes

### GDPR Export/Delete Workflows
- [x] Create data export job that collects all user data
- [x] Export user profile, influencers, content, campaigns, leads
- [x] Generate downloadable JSON file with all user data
- [x] Create data deletion job that removes all user data
- [x] Implement cascading delete for all related records
- [ ] Add admin UI for processing GDPR requests
- [ ] Send email notification when export is ready
- [x] Add 30-day expiry for download links

### Transaction Boundaries
- [x] Add transaction wrapper for campaign generation
- [x] Add transaction wrapper for A/B test winner declaration
- [x] Add transaction wrapper for Stripe webhook processing
- [x] Add transaction wrapper for user deletion
- [x] Add transaction wrapper for bulk operations
- [x] Add transaction wrapper for credit deduction
- [x] Add idempotency protection for webhooks
- [x] Add retry with exponential backoff

### End-to-End Tests
- [x] Test user registration and login flow
- [x] Test Brand Brain creation and enrichment
- [x] Test AI influencer creation
- [x] Test campaign generation
- [x] Test social media scheduling
- [x] Test Stripe checkout flow
- [x] Test admin panel access
- [x] Test GDPR export/delete
- [x] Test tenant suspend/reset controls
- [x] Test transaction boundaries
- [x] Test A/B testing flow
- [x] Test video generation flow
- [x] Test usage tracking and limits

## Phase 36 - Admin UI and User Acceptance Testing

### Tenant Management Admin UI
- [x] Create TenantManagement.tsx page component
- [x] Build tenant list with search, filter, and pagination
- [x] Add tenant detail view with limits and usage stats
- [x] Implement suspend/unsuspend/read-only action buttons
- [x] Add reset limits and update limits modals
- [x] Show audit log for tenant status changes
- [x] Add confirmation dialogs for destructive actions

### GDPR Request Processing Admin UI
- [x] Create GdprRequests.tsx page component
- [x] Build request list with status filters
- [x] Add request detail view with user info
- [x] Implement process export button
- [x] Implement approve/reject deletion buttons
- [x] Show deletion confirmation with record counts
- [x] Add audit trail for GDPR actions

### User Acceptance Testing - The System
- [x] Test Brand Brain creation flow
- [x] Test Brand Brain enrichment
- [x] Test AI Influencer creation
- [x] Test Campaign Factory generation
- [x] Test Content Scheduler
- [x] Test Analytics Dashboard
- [x] Test Video Studio Pro
- [x] Test A/B Testing module
- [x] Test Social Media connections
- [x] Test Admin Panel access and functionality
- [ ] Test Stripe checkout flow (user action required)
- [x] Test plan limits enforcement

## Phase 37 - Subscription Gates Fix and K'ah Q&A Corpus

### Subscription Gate Audit
- [x] Audit organization maxBrands sync on plan upgrade
- [x] Fix brand limit check for agency_plus plan
- [x] Review all subscription gate checks across codebase
- [x] Ensure agency_plus has unlimited brands as documented
- [x] Created centralized planLimits.ts utility
- [x] Updated stripe-webhook.ts to sync org limits on upgrade
- [x] Fixed organization plan enum to include agency_plus

### K'ah Q&A Corpus
- [x] Create initial Q&A training data for K'ah (40+ responses)
- [x] Seed database with K'ah conversation examples
- [x] Add product knowledge responses (platform, pricing, how-to)
- [x] Add personality-consistent responses (motivation, personality)
- [x] Created kahRouter with public chat endpoint
- [x] Integrated Q&A corpus into main chat system
- [x] Added 33 tests for K'ah Q&A functionality
## Phase 38 - Meet K'ah Page Visual Enhancement

### K'ah Creation Roadmap Visual
- [x] Create serpentine/winding path roadmap component (KahCreationRoadmap.tsx)
- [x] Add 7 steps with icons: Brand Brain, Personality, Visuals, Voice, Refine, Content, Deploy
- [x] Style with teal/cyan gradient path with glow effect
- [x] Implement responsive design for desktop, tablet, and mobile
- [x] Integrate into MeetKah.tsx "How K'ah Was Created" section


## Phase 39 - K'ah Floating Chat Widget

### Chat Widget Implementation
- [x] Create KahChatWidget.tsx floating component
- [x] Add chat bubble button with K'ah avatar and green pulse indicator
- [x] Implement expandable chat panel with message history
- [x] Connect to public K'ah chat API (no auth required)
- [x] Add typing indicator and message animations
- [x] Implement responsive design for mobile (380px max width)
- [x] Add minimize/close functionality
- [x] Integrate into App.tsx (available on all pages)
- [x] Add suggested questions for new conversations
- [x] Add welcome message on first open


## Phase 40 - Influencer Creation and Studio Fixes

### Child Safety
- [x] Block use of children in influencer creation (removed child/teen from ageRange enum)
- [x] Add age verification/restriction in image generation prompts
- [x] Add content moderation utility (contentModeration.ts) for uploaded reference images
- [x] Added "Only adult (18+) characters are allowed" warning in UI

### Reference Images
- [x] Reduce minimum reference images to 2
- [x] Set maximum reference images to 5
- [x] Add guidance text: "Upload 2-5 images of the same person for best training results"
- [x] Updated both InfluencerStudio.tsx and CreateInfluencerPro.tsx

### Generated Images Quality
- [x] Fix generated images to use real AI image generation API (trpc.ai.generateImage)
- [x] Improve image generation prompts for better variation (enhanced prompts with style modifiers)
- [x] Images now stored in S3 for permanent storage

### Studio Functionality
- [x] Fix remix functionality with dialog for prompt editing
- [x] Fix save functionality with "Save to Gallery" button
- [x] Add delete single image option with trash icon
- [x] Add "Clear All" generated images with confirmation dialog
- [x] Add "Save to Gallery" option with savedToGallery flag tracking

### Gallery and Persistence
- [x] Fix download functionality with proper blob download
- [x] Fix save functionality with favorite toggle
- [x] Ensure studio images persist via localStorage (user-specific keys)
- [x] Ensure gallery images persist via localStorage (user-specific keys)
- [x] Added Clear Gallery with confirmation dialog


## Phase 41 - About Page and AAO Framework Integration

### About Page Creation
- [ ] Create /about route and About.tsx page
- [ ] Add AAO (AI-Amplified Operators) narrative and explanation
- [ ] Include K'ah origin story (Yam### About Page Creation
- [x] Create comprehensive /about page with AAO narrative
- [x] Add AAO taxonomy section (Founder, Campaign, Influencer AAOs)
- [x] Include "From Hustle to Operatorship" category narrative
- [x] Add AAO vs Tools vs Agents comparison table
- [x] Include AAO interaction model diagram visualization

### Homepage AAO Reframing
- [x] Update hero messaging to emphasize AAO concept
- [x] Add "AI-Amplified Operators for Always-On Growth" badge
- [x] Update feature descriptions with AAO language
- [x] Add footer link to About page

### Meet K'ah Page AAO Integration
- [x] Update K'ah description as "Matango's First AI-Amplified Operator"
- [x] Add "Your Lead AAO" positioning
- [x] Update creation story with AAO context
- [x] Changed CTA to "Deploy Your Own AAO"

### Site-wide AAO Terminology
- [x] Update navigation with About link
- [x] Update Navbar with AAO terminology (AAO Studio, Deploy Your AAO)
- [x] Update Pricing page with AAO language
- [x] Consistent "One Loop. One Brand Brain. Always-On Growth." tagline

## Phase 42 - K'ah Avatar & AAO Onboarding Wizard

### K'ah Avatar Creation (PART A-B)
- [ ] Generate official K'ah avatar from reference image
- [ ] Photorealistic, professional studio look
- [ ] Warm, confident, approachable expression
- [ ] Cyber-noir / deep-teal brand alignment
- [ ] 1024x1024 resolution, 1:1 aspect ratio
- [ ] Save as /client/public/images/kah-avatar.jpg

### Chat Widget Integration (PART C-D)
- [ ] Replace fallback icon with K'ah avatar
- [ ] Update collapsed floating widget avatar
- [ ] Update expanded chat header avatar
- [ ] Ensure no flash of fallback icon during load
- [ ] Test in light & dark mode

### System Persona Binding (PART E)
- [ ] Bind avatar to system influencer record
- [ ] Set K'ah as default persona for product tours
- [ ] Set K'ah as default for chat onboarding
- [ ] Set K'ah as default for Video Studio demos

### AAO Onboarding Wizard
- [x] Create multi-step wizard component (AAOOnboardingWizard.tsx)
- [x] Step 1: Welcome to Operatorware (AAO intro)
- [x] Step 2: Build Your Brand Brain (foundation)
- [x] Step 3: Deploy Your First AAO (influencer creation)
- [x] Step 4: Launch Your Growth Loop (campaign setup)
- [x] Add progress indicator and skip option
- [x] Trigger wizard for new users on first login
- [x] Store wizard completion status in user profile (onboardingCompleted field)
- [x] Add completeOnboarding API endpoint
- [x] Add 12 unit tests for onboarding functionality

### Quality Gate (PART F)
- [x] Generate official K'ah avatar using AI image generation
- [x] Upload K'ah avatar to S3 for permanent storage
- [x] Copy to /client/public/images/kah-avatar.jpg
- [x] Test at small sizes (chat bubble) - verified in KahChatWidget
- [x] Test at large sizes (video preview)
- [x] Verify instant load from /public/images
- [x] Update KahChatWidget with AAO branding


## Phase 44 - AAO Terminology Fix & Full Video Studio Implementation

### AAO Terminology Update
- [x] Change "AI-Amplified Operators" to "AI-Amplified Operation (AAO)" in About page
- [x] Update tagline to "humans set the direction and operators do the work"
- [x] Update Home.tsx with AI-Amplified Operation terminology
- [x] Update AAOOnboardingWizard.tsx with new terminology
- [x] Update KahChatWidget.tsx with new terminology
- [x] Update MeetKah.tsx with new terminology
- [x] Update Pricing.tsx with new terminology

### Creator OS Full Implementation
- [x] Create creatorRouter with full CRUD operations for all 10 tables
- [x] Build Video Studio Pro main page with project management
- [x] Implement scene editor with timeline and drag-drop
- [x] Add avatar and voice selection/integration
- [x] Implement export and rendering workflow
- [x] Write comprehensive tests for Creator OS


## Phase 45 - Revert AAO Terminology

- [x] Change "AI-Amplified Operation (AAO)" back to "AI-Amplified Operator (AAO)"
- [x] Update all references site-wide to use "Operator" not "Operation"
- [x] Update tests to match new terminology


## Phase 46 - Video Studio Enhancements & AAO Documentation

### Template Marketplace
- [x] Create marketplace database tables (listings, purchases, reviews)
- [x] Implement marketplace tRPC router with CRUD operations
- [x] Create template marketplace page with browse/search functionality
- [x] Add template categories UI (Social Media, YouTube, Ads, Tutorials, etc.)
- [x] Implement template preview and purchase flow UI
- [x] Add template sharing/publishing for creators UI
- [x] Create featured templates section UI

### Real-time Collaboration
- [x] Create collaboration database tables (collaborators, presence)
- [x] Implement collaboration tRPC router
- [x] Add presence indicators showing who's editing (UI)
- [x] Implement live cursor tracking for team members (UI)
- [x] Add real-time scene updates via polling (UI)
- [x] Create collaboration panel showing active editors (UI)

### AAO Glossary Page
- [x] Create dedicated /aao-glossary page
- [x] Define AAO types (Content AAO, Engagement AAO, Analytics AAO, etc.)
- [x] Explain AAO vs traditional automation differences
- [x] Add interactive examples and use cases

### AAO Comparison Table
- [x] Add visual comparison table to About page
- [x] Compare AAO vs Marketing Tools vs Human Teams
- [x] Show key differentiators (availability, consistency, scalability)

### AAO Status Indicators
- [x] Create AAO activity database tables (activity_log, daily_stats)
- [x] Implement AAO activity tRPC router
- [x] Add real-time AAO activity status to dashboard (UI)
- [x] Show current AAO tasks (generating content, analyzing, etc.) (UI)
- [x] Display daily/weekly AAO task counts (UI)
- [x] Create AAO activity feed widget (UI)


## Phase 47 - Production-Grade Scaffold Integration

### IAM-First Security Enhancements
- [x] Add RBAC procedures (activeProcedure, adminProcedure, superAdminProcedure) - already implemented
- [x] Create audit service with immutable logging
- [x] Add tenant state enforcement (suspended, read_only) - already implemented
- [ ] Add usage limits service for plan enforcement

### Middleware Layer
- [x] Add rate limiting middleware - already implemented
- [x] Add security headers middleware (helmet integration)
- [x] Add request ID middleware for tracing

### Comprehensive UAT Test Suite
- [x] Add integration tests for auth flow
- [x] Add integration tests for Creator OS
- [ ] Add Playwright E2E tests for full user journey
- [ ] Add test helpers and fixtures

### Load Testing & Security
- [x] Add k6 load test scripts
- [x] Add ZAP security baseline script
- [ ] Add test configuration files

### CI/CD Pipeline
- [x] Add GitHub Actions CI workflow
- [ ] Add docker-compose for local development
- [ ] Add .env.example with all required variables
- [x] Add go-live quality gates


## Phase 48 - Production Scaffold Adaptation

### Environment & Development Setup
- [x] Create .env.example with all required variables (docs/ENVIRONMENT.md)
- [x] Add docker-compose.yml for local MySQL development
- [x] Add database seed script for UAT user

### E2E Testing
- [x] Install Playwright dependencies
- [x] Create Playwright configuration
- [x] Create E2E test for login flow
- [x] Create E2E test for dashboard
- [x] Create E2E test for Creator OS

### Verification
- [x] Run all tests to verify integration (410 tests passing)
- [x] Save checkpoint


## Phase 49 - Account Deletion Guardrails + 90D Soft Delete + 12M Retention

### Database Schema
- [x] Add account_status enum (ACTIVE, DEACTIVATED, SUSPENDED, SOFT_DELETED_90D, RETENTION_12M, HARD_DELETED)
- [x] Add lifecycle columns to users table (deleted_at, deleted_by, deletion_reason, recovery_deadline, retention_until, hard_deleted_at)
- [x] Create account_lifecycle_events table
- [x] Create account_deletion_requests table
- [x] Create billing_pause_records table

### Account Lifecycle API
- [x] Create accountLifecycle tRPC router
- [x] Implement pause-billing endpoint
- [x] Implement resume-billing endpoint
- [x] Implement downgrade endpoint
- [x] Implement deactivate endpoint
- [x] Implement reactivate endpoint
- [x] Implement request-delete endpoint
- [x] Implement confirm-delete endpoint
- [x] Implement cancel-delete endpoint
- [x] Implement restore endpoint
- [x] Implement getStatus endpoint
- [x] Implement getHistory endpoint

### IAM Enforcement
- [ ] Update auth middleware to check account_status
- [ ] Block token issuance for non-ACTIVE accounts
- [ ] Return proper JSON errors for deleted/retention accounts

### UI Wizard
- [x] Create AccountDeletionWizard component
- [x] Step 1: Alternatives-first (pause, downgrade, deactivate, delete)
- [x] Step 2: Data export opportunity
- [x] Step 3: Strong confirmation (typed phrase, email match, acknowledgements)
- [x] Step 4: Final confirmation with timeline summary
- [x] Create AccountSettings page with lifecycle management

### Billing Integration
- [ ] Implement Stripe subscription pause
- [ ] Implement Stripe plan downgrade
- [ ] Implement billing cancel on soft delete
- [ ] Implement billing restore on account restore

### Background Jobs
- [ ] Create daily job: SOFT_DELETED_90D → RETENTION_12M
- [ ] Create daily job: RETENTION_12M → HARD_DELETED
- [ ] Implement hard delete data purge/anonymization

### Admin View
- [ ] Create /admin/account-lifecycle page
- [ ] Show lifecycle events and statuses
- [ ] Add support ticket management

### Policy Updates
- [ ] Update Terms of Service page
- [ ] Update Privacy Policy page
- [ ] Add Account Deletion Policy section

### UAT Tests
- [ ] Test alternatives flow (pause, downgrade, deactivate)
- [ ] Test soft delete flow and 90-day restore
- [ ] Test retention period and support restore
- [ ] Test hard delete automation
- [ ] Document UAT evidence


## Phase 50 - Video Scripts → Video Studio/Lab → AAO → Meet K'ah Workflow

### Database Schema
- [x] Add workflow_sessions table (id, userId, brandId, title, status, timestamps)
- [x] Add scripts table (id, userId, sessionId, platform, language, tone, contentJson, timestamps)
- [x] Add media_assets table (id, userId, sessionId, brandId, type, s3Key, mimeType, dimensions, metadata)
- [x] Add generation_jobs table (id, userId, sessionId, kind, status, progress, forgeJobId, attempts, lease)
- [x] Add influencer_profiles table (id, userId, displayName, dob, ageRange, isUnder10)
- [x] Add kah_messages table (id, userId, sessionId, role, content, metaJson)

### tRPC Routers
- [x] Create workflow router (createSession, getSession, listSessions)
- [x] Create scripts router (generate, save, listBySession)
- [x] Create gallery router (uploadReferenceImage, listAssets, getSignedUrl)
- [x] Create images router (generate, getStatus)
- [x] Create videos router (generate, getStatus, getPlaybackUrl)
- [x] Create jobs router (getStatus, cancel, listBySession)
- [x] Create policy router (upsertInfluencerProfile, assertNotUnder10)
- [x] Create kah router (chat, getHistory, saveMessage)
- [x] Create aao router (deployCampaignAsset)

### UI Pages
- [x] Create VideoScriptsPage with workflow session management
- [x] Create VideoStudioPage with integrated script/image/video generation
- [x] Create AAOStudioPage for campaign asset deployment
- [x] Create MeetKahPage with AI chat interface

### UI Components
- [ ] Create GalleryGrid component for media asset display
- [ ] Create VideoPlayer component with signed URL support
- [ ] Create KahChat component for AI conversations
- [ ] Update AppShell/navigation for new workflow pages

### Background Jobs
- [x] Implement job worker with DB polling and lease management
- [x] Implement Forge API integration for image generation
- [ ] Implement Forge API integration for video generation (placeholder)
- [x] Implement S3 artifact storage for generated media

### Policy Enforcement
- [ ] Implement under-10 age policy check
- [ ] Add audit logging for policy violations
- [ ] Integrate policy checks in video generation workflow

### Tests
- [x] Write tests for workflow router
- [x] Write tests for scripts router
- [ ] Write tests for gallery router
- [x] Write tests for jobs router
- [ ] Write tests for policy router


## Phase 51 - BYOK AI Provider Integration (Upselling)

### Database Schema
- [x] Create ai_providers table (id, name, slug, type, logoUrl, docsUrl, isBuiltIn)
- [x] Create user_ai_credentials table (id, userId, providerId, encryptedApiKey, isValid, lastValidated)
- [x] Create ai_usage_logs table (id, userId, providerId, jobId, operation, tokensUsed, cost, timestamp)
- [x] Create provider_rate_limits table (id, providerId, tier, requestsPerMinute, requestsPerDay)

### tRPC Routers
- [x] Create aiProviders router (listProviders, getProvider)
- [x] Create aiCredentials router (addCredential, updateCredential, deleteCredential, validateCredential)
- [x] Create aiUsage router (getUsage, getUsageByProvider, getUsageSummary)

### Provider Abstraction Layer
- [x] Create BaseAIProvider abstract class
- [x] Implement ManusProvider (built-in, free tier)
- [x] Implement OpenAISoraProvider (BYOK)
- [x] Implement RunwayProvider (BYOK)
- [ ] Implement PikaProvider (BYOK)
- [x] Implement ReplicateProvider (BYOK)
- [x] Create ProviderFactory for dynamic provider selection

### UI Pages
- [x] Create AIProvidersPage for managing API keys
- [x] Add provider cards with status indicators
- [x] Add API key input with validation
- [x] Add usage dashboard per provider
- [x] Add upgrade prompts for premium providers

### Workflow Integration
- [x] Add provider selection to video generation form
- [x] Create generationService for provider routing
- [x] Implement usage logging and tracking
- [ ] Show available providers based on user credentials
- [ ] Route generation jobs to selected provider
- [ ] Track usage and costs per provider

### Tests
- [ ] Write tests for aiProviders router
- [ ] Write tests for aiCredentials router
- [ ] Write tests for provider adapters
- [ ] Write tests for provider factory

## Phase 52 - Enhanced AI Provider Features

### Pika Labs Provider
- [x] Create PikaProvider adapter with text-to-video and image-to-video support
- [x] Add Pika API integration for video generation
- [x] Add Pika to provider selection UI

### Real-Time Job Status (SSE)
- [x] Create SSE endpoint for job status streaming
- [x] Implement job status change detection
- [x] Create useJobStatus hook for frontend
- [x] Add real-time progress indicators to generation UI

### Usage Analytics Dashboard
- [x] Create /usage-analytics page
- [x] Add cost breakdown chart by provider
- [x] Add generation counts chart (daily/weekly/monthly)
- [x] Add spending trends visualization
- [x] Add provider comparison metrics

## Phase 53 - Navigation and Layout Fixes

### AI Providers Page Layout
- [x] AIProvidersPage already uses DashboardLayout wrapper
- [x] Branding header visible via Navbar component
- [x] Navigation accessible via The System menu

### Navigation Integration
- [x] Add AI Providers link to The System menu (Scale & Customize section)
- [x] Add Usage Analytics link to The System menu (Scale & Customize section)
- [x] Add Account Settings link to The System menu

### Workflow Menu Reorder
- [x] Reorder The System menu to: Brand Brain → Video Scripts → Video Lab → AAO Studio → Campaign Factory → Meet K'ah
- [x] Update menu to follow the correct workflow sequence
- [x] Ensure consistent navigation across all pages

## Phase 54 - 5-Step Growth Loop Refactor

### Database & Schema
- [x] Add onboarding_step column to users/workspaces table
- [x] Add plan_intent fields (tier, billing_cycle, price_id, origin)
- [x] Ensure plan status fields exist (tier, billing_cycle, status)

### Entitlements Engine
- [x] Create getEntitlements(user) server helper
- [x] Define entitlement matrix (Free, Creator, Agency, Enterprise)
- [x] Enforce entitlements via entitlementGuard middleware

### Onboarding State Machine
- [x] Create onboarding tRPC router (getState, getPlans, advanceStep, selectPlan, recordIntent)
- [x] Implement PLAN → BRAND → CAMPAIGN → PUBLISH → OPTIMIZE progression
- [x] Persist onboarding state server-side
- [x] Auto-advance logic after plan selection and webhook confirmation

### PlanSelectionDrawer + PricingEmbed
- [x] Create PlanSelectionDrawer component (overlay inside dashboard shell)
- [x] Handle Free plan activation (immediate, no Stripe)
- [x] Handle Paid plan checkout (reuse existing Stripe wiring)
- [x] Post-checkout reconciliation via OnboardingGate

### 5-Step Growth Loop UI
- [x] Refactor GrowthLoopCard to 5 steps
- [x] Add StepCard with step number, title, subtext, status badge
- [x] Status badges: Locked / Ready / Configured / Complete
- [x] Step 01: Select Plan highlighted for new users

### OnboardingGate
- [x] Create OnboardingGate component for dashboard
- [x] Gate Brand Brain behind plan selection
- [x] Preserve session/context during plan selection
- [x] Handle checkout=success and checkout=cancel query params

### Server Enforcement
- [x] Create entitlementGuard middleware (requireFeature, requirePaidPlan, requireOnboardingStep)
- [x] Create entitledProcedure for endpoints needing entitlement context
- [x] Write 29 tests for entitlements engine and onboarding router
- [x] Return clear upgrade-required responses via TRPCError FORBIDDEN

### Tests
- [x] Write tests for entitlements engine (29 tests)
- [x] Write tests for onboarding state machine (included in 29 tests)
- [x] Write tests for plan selection flow (included in 29 tests)
- [x] Verify existing tests still pass (567 total tests passing)

## Phase 55 - Canonical Workflow Rebuild (Studios + Upload/Training + S3)

### Database Schema
- [x] Influencers table already exists
- [x] Create media_objects table (id, userId, kind, purpose, objectKey, contentType, bytes, sha256, url)
- [x] Create influencer_images table (id, influencerId, mediaId, role)
- [x] Influencer training_jobs table already exists
- [x] Create video_gen_jobs_v2 table (id, userId, influencerId, scriptId, scriptText, provider, status, progress, outputMediaId, batchGroupId, lipSync, error)

### S3 Storage Service
- [x] Existing storagePut/storageGet helpers reused
- [x] Server-side putObject for model outputs via storagePut

### Model Provider Adapters
- [x] Create InfluencerTrainingProvider interface
- [x] Create VideoProvider interface
- [x] Implement LocalTrainingProvider (placeholder with progress simulation)
- [x] Implement LocalVideoProvider (placeholder MP4 generation)
- [x] Create provider factory (getTrainingProvider, getVideoProvider)

### Influencer Studio V2 Router (Step 2)
- [x] uploadImage endpoint (server-side S3 upload)
- [x] createInfluencer endpoint
- [x] startTraining endpoint
- [x] getTrainingStatus endpoint
- [x] listInfluencers endpoint
- [x] listGallery endpoint (persistent gallery from media_objects)
- [x] generateImage endpoint

### Video Studio V2 Router (Step 4 Rebuild)
- [x] generate endpoint (with influencer selection + lip-sync)
- [x] getJobStatus endpoint (with progress)
- [x] listJobs endpoint
- [x] cancelJob endpoint
- [x] library endpoint (completed videos)
- [x] deleteVideo endpoint
- [x] batchGenerate endpoint (1-10 scripts)
- [x] stats endpoint

### Influencer Studio Page (/influencer-studio)
- [x] Create Influencer form (name + image upload)
- [x] 4-tab workflow: Create & Upload → Train → Generate → Gallery
- [x] Training status panel with progress bar
- [x] Influencer list (ready/training/failed)
- [x] Image gallery with generation

### Video Studio Page (/video-studio rebuild)
- [x] Rebuild with V2 router (in progress)
- [x] Influencer selector (only READY)
- [x] Script textarea
- [x] Batch generation control
- [x] Lip-sync toggle (default ON)
- [x] Job progress list
- [x] Output library grid

### Navigation & Growth Loop
- [x] Reorder Build & Create menu: Brand Brain → Influencer Studio → Video Scripts → Video Studio → AAO Studio → Campaign Factory → Meet K'ah
- [x] Update Growth Loop Step 3 link to /influencer-studio
- [x] Add Influencer Studio to The System menu
- [x] Fix AAO Studio path to /aao-studio
- [x] Fix Publish & Track path to /social-connections
- [x] Add /aao-studio route to App.tsx

### Tests & UAT
- [ ] Write tests for influencerStudio router
- [x] Write tests for videoStudio router
- [ ] Create UAT_STUDIOS.md acceptance criteria document
- [x] Verify all existing tests still pass
- [x] Fix /influencer-studio 404 - route was registered as /studio, added /influencer-studio route and redirect

### Bug Fixes
- [x] Fix influencer_training_jobs table query failure — created 10 missing tables (influencer_training_jobs, influencer_generations, influencer_presets, influencer_templates, video_scenes, video_assets, video_templates, voice_library, music_tracks, video_credits_usage)
- [x] Fix Video Studio "View" button not clickable / not opening generated video preview
- [x] Fix Video Studio preview — completed videos show placeholder instead of actual video content (now shows graceful fallback with thumbnail for new jobs, clear message to configure a real video provider; processVideoJob now calls generation service)

## Phase 15 - Bug Fixes & Real Data

### Select.Item Empty Value Errors
- [x] Fix Select.Item empty value error on AAO Studio page (/aao-studio)
- [x] Fix Select.Item empty value error on image generation related pages (CampaignFactory)

### Delete Functionality
- [x] Add delete image functionality (uploaded images in Influencer Studio)
- [x] Add delete influencer functionality (created influencers)

### Replace Placeholder Data with Real Data
- [x] Replace dummy/placeholder data on Analytics Hub (/analytics-hub) with real analytics
- [x] Replace dummy/placeholder data on Leads page (/leads) with real leads CRUD

## Phase 16 - Video Studio Fixes

### Video Generation Pipeline
- [x] Fix Video Studio generating images instead of actual video content (Manus built-in generates cinematic preview frame; real video requires BYOK provider)
- [x] Integrate real video generation API (generation service now properly routes to BYOK providers when configured)

### Delete Functionality for Video Assets
- [x] Add delete button for video jobs in Jobs tab
- [x] Add delete button for video assets in Library tab
- [x] Add bulk delete / clear all functionality for video assets (Delete All button in Jobs tab)
- [x] Backend deleteJob and deleteAllJobs endpoints for videoStudioV2 router

### Brand Brain AI Suggestions
- [x] Add African-context AI name suggestions (Yamurai, Shuri, Batie, Na'ah) to Brand Brain (clickable chips + LLM prompt enhancement)

## Phase 17 - Seamless Workflow Pipeline Navigation

### Shared Workflow Navigation Component
- [ ] Create WorkflowNav component showing pipeline stages (Brand Brain → Campaign Factory → Scripts → Video Studio → Publish)
- [ ] Show current stage highlighted, completed stages with checkmarks, future stages clickable
- [ ] Add forward/back navigation buttons between pipeline stages

### Campaign Factory Navigation
- [ ] Add WorkflowNav to Campaign Factory page
- [ ] Add "Next: Generate Scripts" CTA after campaign assets are generated
- [ ] Add contextual forward navigation to Video Scripts with campaign context

### Video Scripts Navigation
- [ ] Add WorkflowNav to Video Scripts page
- [ ] Add "Generate Video" action button on each completed script
- [ ] Add "Next: Video Studio" CTA that passes script to Video Studio
- [ ] Make it obvious how to use generated scripts in the next pipeline step

### Video Studio Navigation
- [ ] Add WorkflowNav to Video Studio page
- [ ] Add "Next: Publish" CTA after video is generated
- [ ] Add forward navigation to social publishing/scheduling

### Full Pipeline Navigation
- [ ] Add WorkflowNav to Brand Brain page
- [ ] Add WorkflowNav to Influencer Studio page
- [ ] Add WorkflowNav to Social Connections / Publishing page
- [ ] Ensure every pipeline page has clear forward progression

## Milestone 2: Tenant Ops + Billing (Gap Implementation)

### Stripe Subscription Management (Real API Calls)
- [x] Wire stripe.subscriptions.update for pause (pause_collection)
- [x] Wire stripe.subscriptions.update for resume (remove pause_collection)
- [x] Wire stripe.subscriptions.cancel for account deactivation/cancellation
- [x] Implement extend trial endpoint (stripe.subscriptions.update trial_end)
- [x] Handle customer.subscription.deleted webhook event
- [x] Handle customer.subscription.paused webhook event
- [x] Handle invoice.payment_failed webhook event

### AdminTenantDetail - Wire to Real API
- [x] Replace mock data with trpc.admin.getTenantDetails query
- [x] Wire usage tab to trpc.admin.getTenantUsage
- [x] Wire billing history to real Stripe invoice data
- [x] Wire audit log to real audit_logs table
- [x] Add action buttons (suspend, unsuspend, read-only) with real mutations

### Entitlements Editor for Plan Limits
- [x] Build editable limits form in AdminTenantDetail usage tab
- [x] Wire form to trpc.admin.updateTenantLimits mutation
- [x] Add reset-to-plan-defaults button wired to trpc.admin.resetTenantLimits
- [x] Show current plan defaults vs custom overrides

### Usage Counters Display (User-Facing)
- [x] Add usage summary section to AccountSettings page
- [x] Show progress bars for each limit category (assets, campaigns, videos, etc.)
- [x] Wire to plan limits and current usage data
- [x] Show upgrade CTA when approaching limits

## UI Customizations (User Request)

### Influencer Studio - Create Influencer
- [ ] Add example names (Ka'ah, Neon V, Skylar, Tema, etc.) to the name input placeholder

### Video Scripts Page
- [ ] Change "Official Matango Scripts" to "Matango auto-generated Scripts"

### Video Studio
- [ ] Change script textarea placeholder to "Paste or write your video script here..."
- [ ] Change "AI Provider" label to "AI Models" in Settings
- [ ] Rebrand "Manus (Built-in)" to "Matango.ai (Built-in)"
- [ ] Move "Select Influencer" into Settings panel for better flow (Influencer→Model→Lip Sync→Batch→Generate)
- [ ] Limit influencer video count to 5
- [ ] Remove/fix "Navigation Page 1 Page 2" placeholder text
